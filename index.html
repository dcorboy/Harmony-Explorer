<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>Harmony-Explorer</title>
	<meta name="title" content="Harmony-Explorer">

	<!-- midi.js package -->
	<script src="./MIDI.js/build/MIDI.js" type="text/javascript"></script>	
	<!-- extras -->
	<script src="./MIDI.js/inc/Base64.js" type="text/javascript"></script>
	<script src="./MIDI.js/inc/base64binary.js" type="text/javascript"></script>

	<script src="./chords.js" type="text/javascript"></script>
	<script src="./samples.json" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="chords.css">
</head>
<body>
	<script type="text/javascript">
		window.onload = init();
	</script>
	<div id="container" class="border">
		<div id="topbar" class="section">
			<div class="color1 header">
				<h1 class="uiheading">Harmony-Explorer </h1>
				<span>v1.0</span>
				<span class="captionbutn" onclick="selectOverlay(0);">&#x24d8;</span>
			</div>
			<div id="keyboard">
				<div id="upperkeys"></div>
				<div id="lowerkeys"></div>
			</div>
		</div>
		<table id="maincontrols" class="section">
			<tr>
				<td id="keyblock">
					<div id="keyselect" class="pad dimmer dim2">
						<div class="color1 header">
							<h2 class="uiheading">Key</h2>
						</div>
						<div class="optionctnr" id="keyroot" name="root"></div>
					</div>
				</td>
				<td id="recordingblock" class="pad fillcell border"></td>
				<td id="chordblock">
					<div id="chordselect" class="pad dimmer dim0 dim2">
						<div class="color1 header">
							<h2 class="uiheading">Chord</h2>
						</div>
						<div class="optionctnr" id="chord" oname="chord"></div>
					</div>
				</td>
			</tr>
			<tr>
				<td id="harmonymode" class="shortpad">
					<div id="harmonycontrols" class="shortpad border dimmer dim1 dim2">
						<label><input id="modemajor" type="radio" onclick="chgScale(0);" value="major" name="r1" checked />Major</label>
						<label><input id="modeminor" type="radio" onclick="chgScale(1);" value="minor" name="r1" />Minor</label>
					</div>
				</td>
				<td id="recinfoblock" class="shortpad buttons">
					<div id="recblock1" class="fl-l">
						<div id="playchord" class="color1 tile button" title="Play current chord" onclick="playChord();" >&#x266c;</div>
						<div id="record" class="color1 tile button" title="Record current chord" onclick="gRecorder.addRecording();" >&#x2617; &#x266c;</div>
						<div id="rest" class="color1 tile button" title="Record a rest interval" onclick="gRecorder.addRest();" >&#x2617; &#x2300;</div>
						<div id="play" class="color1 tile button" title="Play current recording" onclick="gRecorder.playRecording();" >&#x25b6;</div>
						<div id="delete" class="color1 tile button" title="Remove last chord" onclick="gRecorder.deleteRecording();" >&#x232b;</div>
						<div id="clear" class="color1 tile button" title="Clear entire recording" onclick="clearRecording();" >&#x274c;</div>
						<div id="recordmode" class="color10 tile button dim" title="Toggle live record" onclick="gRecorder.toggleRecording(this);" >&#x26ab;</div>
					</div>
					<div id="recblock2" class="fl-r">
						<div id="octavectrl">
							<span id="octavelbl" class="uiheading">Octave</span>
							<div id="octaveup" class="color6 tile button" title="Raise octave" onclick="chgOctave(1);" >&#x25b3;</div>
							<span id="octaveoutput" class="output" title="Current octave">O</span>
							<div id="octavedown" class="color6 tile button" title="Lower octave" onclick="chgOctave(-1);" >&#x25bd;</div>
						</div>
						<div id="loadsample" class="color4 tile button widebutton" title="Load a harmony sample" onclick="selectOverlay(1);">Samples</div>
						<div id="loadinstrument" class="color5 tile button widebutton" title="Choose an instrument" onclick="selectOverlay(2);">Voice</div>
<!-- 					<div id="save" class="color2 tile button" title="Development save function" onclick="gRecorder.saveRecording();" >Save</div> -->
					</div>
				</td>
				<td id="rightblock" class="shortpad">
					<div id="harmonycontrols" class="shortpad border">
						<div id="chordoutput" class="output">Chord Description</div>
						<div id="harmonyoutput" class="output">Harmony Description</div>
					</div>
				</td>
			</tr>
		</table>
		<div id="graphblock" class="section shortpad dimmer dim1 dim2">
			<img id="harmonychordgraph" class="center" src="harmony-graph.png" width="800" height="500" alt="Harmonies Selector" usemap="#hgraphmap">
		</div>
	</div>

	<div id="overlay0" class="overlay" onclick="dismissOverlay(0, event);">
		<div class="border overlay-inner">
			<div class="color1 header">
				<h1 class="uiheading">Helpful Dialog</h1>
				<span class="captionbutn" onclick="dismissOverlay(0, false);">&#x2612;</span>
			</div>
			<div class="overlay-body">
				<p>Play the current chord with the <span class="bold">&#x266c;</span> button. Chord name and notes are displayed under the <span class="bold">Chord</span> selection box.</p>
				<p>Click on the colored graph below the main UI to follow the general progression of chords in C-Major (the default).<p>
				<p>The <span class="bold">Shift</span> key will raise the chord an octave while the <span class="bold">Ctrl</span> key will lower the chord an octave.</p>
				<p>Choose a different root note from the <span class="bold">Key</span> selection box on the top-left and either
					<span class="bold">Major</span> or <span class="bold">Minor</span> from the radio buttons below it.</p>
				<p>More complex variations of the root note can be selected from the <span class="bold">Chord</span> selection box on the top-right.</p>
				<p>Clicking the keyboard with the <span class="bold">Alt/Option</span> key pressed will add notes to the current chord.
					Clicking without <span class="bold">Alt/Option</span> will start a new custom chord.</p>
				<h2>Recording</h2>
				<ul>
					<li>To record the current chord, click the <span class="bold">&#x2617; &#x266c;</span> button</li>
					<li>To record a rest measure, click the <span class="bold">&#x2617; &#x2300;</span> button</li>
					<li>To play back the recorded chords, click the <span class="bold">&#x25b6;</span> button</li>
					<li>To delete the last recorded chord, click the <span class="bold">&#x232b;</span> button</li>
					<li>To clear the current recording, click the <span class="bold">&#x274c;</span> button</li>
					<li>Toggle the record mode by clicking the <span class="bold">&#x26ab;</span> button. In record mode, all chords played will be recorded.</li>
				</ul>
				<p>Load sample chord progressions from popular songs by clicking the <span class="bold">Samples</span> button.</p>
				<p>Load different instruments by clicking the <span class="bold">Voice</span> button.</p>
				<hr />
				<p class="info-footer"><span class="bold">Harmony Explorer</span> is open source and available on <a href="https://github.com/dcorboy/Harmony-Explorer" target="_blank">GitHub</a>.
					More information is available <a href="http://www.cormerica.com/harmony-explorer/" target="_blank">here</a>.</p>
			</div>
		</div>
	</div>

	<div id="overlay1" class="overlay" onclick="dismissOverlay(1, event);">
		<div class="border overlay-inner">
			<div class="color1 header">
				<h1 class="uiheading">Load Sample</h1>
				<span class="captionbutn" onclick="dismissOverlay(1, false);">&#x2612;</span>
			</div>
			<div class="overlay-body">
				<ul id="samples" class="selection">
				</ul>
			</div>
		</div>
	</div>

	<div id="overlay2" class="overlay" onclick="dismissOverlay(2, event);">
		<div id="instrument-overlay" class="border overlay-inner">
			<div class="color5 header">
				<h1 class="uiheading">Load Instrument</h1>
				<span class="captionbutn" onclick="dismissOverlay(2, false);">&#x2612;</span>
			</div>
			<div class="overlay-body">
				<ul id="instruments" class="selection">
				</ul>
			</div>
		</div>
	</div>

	<noscript>
		<div align="center">
			<b>Chord-Explorer requires Javascript</b>
				You will need to enable JavaScript in your browser
				in order to explore chords.
		</div>
	</noscript> 
</body>
</html>
